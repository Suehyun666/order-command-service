syntax = "proto3";

package account;

import "account_commons.proto";

option java_multiple_files = true;
option java_package = "com.hts.generated.grpc";
option java_outer_classname = "AccountOrderProto";

// 예수금 예약 요청
message ReserveCashRequest {
  int64 account_id = 1;
  string amount = 2;        // 가격 BigDecimal로 파싱
  string reserve_id = 3;    // 멱등성 + 예약 식별자
  string order_id = 4;  // 클라이언트 로컬 주문 ID
}

// 예수금 예약 해제 요청
message CancelCashReserveRequest {
  int64 account_id = 1;
  string reserve_id = 2;
}

message ReservePositionRequest{
  int64 account_id = 1;
  string symbol = 2;        // 종목 코드
  string amount = 3;        // 가격 BigDecimal로 파싱
  int64 quantity = 4;       // 예약 수량
  string reserve_id = 5;    // 멱등성 + 예약 식별자
  string order_id = 6;      // 클라이언트 로컬 주문 ID
}

message CancelPositionReserveRequest{
  int64 account_id = 1;
  string reserve_id = 2;
}

service AccountOrderService {
  rpc ReserveCash(ReserveCashRequest) returns (CommonReply);
  rpc CancelCashReserve(CancelCashReserveRequest) returns (CommonReply);
  rpc ReservePosition(ReservePositionRequest) returns (CommonReply);
  rpc CancelPositionReserve(CancelPositionReserveRequest) returns (CommonReply);
}